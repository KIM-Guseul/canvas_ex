<!doctype html>
<html class="export" lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width">
    <meta name="description" content="Cascading grid layout library">
    <title>Canvas-test</title>

    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>

</head>

<body>

    <style>
        html,
        body {
            margin: 0;
        }

        canvas {
            background: #eee;
        }
    </style>

    <!-- ========================================== -->
    <div>
        <canvas id="canvas" width="1000" height="800"></canvas>
    </div>

    <!-- ========================================== -->

    <script>
    var canvas = document.querySelector('canvas'),
        ctx = canvas.getContext('2d'),
        cw = canvas.width,
        ch = canvas.height,
        x = Math.floor(Math.random()*cw),
        y = Math.floor(Math.random()*ch),
        direction = Math.floor(Math.random()*Math.PI*2),
        r = 100,
        dx = 4,
        dy=2;

        function drawCircle(){
            ctx.beginPath();
            ctx.clearRect(0,0,cw,ch);
            ctx.arc(x,y,r,0,2*Math.PI);
            ctx.fill();
        }

        function update(){
            drawCircle();
            x += dx;
            y += dy;
        
            if(x+r > cw || x-r < 0){dx *= -1;}  //dx = dx * -1;
            if(y+r > ch || y-r < 0){dy *= -1;}
            console.log(dx)
            requestAnimationFrame(update);
        }

        update();
    </script>




</body>

</html>
